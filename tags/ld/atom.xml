<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
<title><![CDATA[Tag: ld | kk Blog —— 通用基础]]></title>
<link href="http://abcdxyzk.github.io/tags/ld/atom.xml" rel="self"/>
<link href="http://abcdxyzk.github.io/"/>
<updated>2014-11-26T01:04:12+08:00</updated>
<id>http://abcdxyzk.github.io/</id>
<author>
<name><![CDATA[kk]]></name>

</author>
<generator uri="http://octopress.org/">Octopress</generator>

<entry>
<title type="html"><![CDATA[gcc同时使用动态和静态链接]]></title>
<link href="http://abcdxyzk.github.io/blog/2014/11/06/complier-static-dynamic-ld/"/>
<updated>2014-11-06T14:51:00+08:00</updated>
<id>http://abcdxyzk.github.io/blog/2014/11/06/complier-static-dynamic-ld</id>
<content type="html"><![CDATA[<p>gcc &ndash;static a.c -Wl,-Bstatic -lm -Wl,-Bdynamic -lc</p>

<p>其中用到的两个选项：-Wl,-Bstatic和-Wl,-Bdynamic。这两个选项是gcc的特殊选项，它会将选项的参数传递给链接器，作为 链接器的选项。比如-Wl,-Bstatic告诉链接器使用-Bstatic选项，该选项是告诉链接器，对接下来的-l选项使用静态链 接；-Wl,-Bdynamic就是告诉链接器对接下来的-l选项使用动态链接。下面是man gcc对-Wl,option的描述，<br/>
<code>
    -Wl,option  
           Pass option as an option to the linker.  If option contains commas, it is   
           split into multiple options at the commas.  You can use this syntax to pass  
           an argument to the option.  For example, -Wl,-Map,output.map passes -Map output.map  
           to the linker.  When using the GNU linker, you can also get the same effect with   
           -Wl,-Map=output.map.  
</code>
下面是man ld分别对-Bstatic和-Bdynamic的描述，<br/>
```
    -Bdynamic<br/>
    -dy<br/>
    -call_shared<br/>
           Link against dynamic libraries. You may use this option multiple times on the<br/>
           command line: it affects library searching for -l options which follow it.</p>

<pre><code>-Bstatic  
-dn  
-non_shared  
-static  
       Do not link against shared libraries. You may use this option multiple times on   
       the command line: it affects library searching for -l options which follow it.   
       This option also implies --unresolved-symbols=report-all.  This option can be   
       used with -shared.  Doing so means that a shared library is being created but   
       that all of the library's external references must be resolved by pulling in   
       entries from static libraries.  
</code></pre>

<p>```
　　值得注意的是对-static的描述：-static和-shared可以同时存在，这样会创建共享库，但该共享库引用的其他库会静态地链接到该共享库中。</p>
]]></content>
</entry>

</feed>
