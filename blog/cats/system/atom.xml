<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: system | kk Blog —— 通用基础]]></title>
  <link href="http://abcdxyzk.github.io/blog/cats/system/atom.xml" rel="self"/>
  <link href="http://abcdxyzk.github.io/"/>
  <updated>2014-12-24T23:53:30+08:00</updated>
  <id>http://abcdxyzk.github.io/</id>
  <author>
    <name><![CDATA[kk]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[【官方固件】努比亚Z5Smini官方4.4.2全新UI公测版]]></title>
    <link href="http://abcdxyzk.github.io/blog/2014/12/24/android-nubia-recovery/"/>
    <updated>2014-12-24T23:34:00+08:00</updated>
    <id>http://abcdxyzk.github.io/blog/2014/12/24/android-nubia-recovery</id>
    <content type="html"><![CDATA[<p><a href="http://www.onekeyrom.com/rom/zte_130038_10965.html">http://www.onekeyrom.com/rom/zte_130038_10965.html</a></p>

<p>pan.baidu.com/s/1c0u18Ik</p>

<p><span style="color:red">nx403a进入bootloader模式直接些boot分区，但是驱动没弄好起不来。这时再进bootloader却进不了（严重怀疑他们的bootloader建在boot上），只能进recovery模式。但是recovery是官方的，只能按官方方法升级整个系统救砖</span></p>

<p>本次放出的压缩包内含两套固件：从4.2升级到4.4.2和从4.4.2再降级回4.2两套共计4个zip文件包<br/>
所以请大家下载后先不要急于不要一键刷机，仔细阅读下面的使用说明和注意事项</p>

<h4>【升级注意事项】</h4>

<ol>
<li>升级前，请取消手机的人脸解锁、图案锁、密码锁等各种屏幕锁。</li>
<li>升级前，请务必备份好手机内的各项重要数据（联系人、短信、通话记录、程序等），避免异常丢失。</li>
<li>升级前，请保证手机电池电量至少达到40%。</li>
<li>在升级过程中，请将手机平放，务必不要触碰手机屏幕（否则可能导致触屏失准），直至确认升级成功。</li>
<li>为了便于升级发生异常后的手机挽救，nubia UI ROM安装包同时提供升级文件与回退文件，请务必同时保留在手机里。</li>
</ol>


<h4>【Z5S mini 机型4.2到4.4版本升级操作说明】</h4>

<p>步骤1： 下载Z5S mini机型的nubia UI ROM安装包（内含4个zip文件）<br/>
步骤2： 将手机连接电脑，将安装包的4个zip文件并列拷贝至手机sdcard根目录下<br/>
步骤3： 按开关机键，选择“重启”手机，在重启过程中一直长按音量上键进入recovery模式<br/>
步骤4： 在recovery模式界面，请按音量键选择apply update from sdcard菜单项，并按开关机键确定，接着按音量键选择NX403A_4.2_to_4.4_recovery_xxx.zip文件，并按开关机键确定，开始升级<br/>
步骤5： 步骤4升级完成后如下图所示，此时光标条位于reboot system now菜单项，直接按开关机键重启手机，请观察手机能否顺利进入桌面<br/>
步骤6： 手机顺利进入桌面后，请重复步骤3，即再次重启手机，并在重启过程中一直长按音量上键，再次进入recovery模式<br/>
步骤7： 在recovery模式界面，请按音量键选择wipe date/factory reset 菜单项，按开关机键进入，进行数据擦除<br/>
步骤8： 数据擦除结束后，请按音量键选择apply update fromsdcard菜单项，按开关机键进入，再按音量键选择NX403A_4.4_update_xxx.zip文件，按开关机键  确认，执行升级，此过程要1到2分钟<br/>
步骤9： 步骤8升级完成后如下图所示，此时光标条位于reboot system now菜单项，直接按开关机键重启手机</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[moto sbf包]]></title>
    <link href="http://abcdxyzk.github.io/blog/2014/12/22/android-sbf/"/>
    <updated>2014-12-22T22:15:00+08:00</updated>
    <id>http://abcdxyzk.github.io/blog/2014/12/22/android-sbf</id>
    <content type="html"><![CDATA[<p>解出的CG35.smg或CG35.img是boot.img, boot.img可以按照 <a href="/blog/2014/12/22/android-img/">这里</a> 的方式编辑</p>

<p><span style="color:red">注意： motorola只有一些新的机型有方法解bootloader锁，沒解锁的bootloader会验证boot、recovery等分区的完整性（两个分区都是8M），不管有用的数据还是没用的数据都加入验证（好像是隔段距离取点数据做验证，因为替换最后100字节可以刷成功，替换多点就失败。可是实际有用的boot.img大小才4M左右）。</span></p>

<p>MOTO X解BL锁教程  <a href="http://bbs.gfan.com/android-6726986-1-1.html">http://bbs.gfan.com/android-6726986-1-1.html</a></p>

<h4>1 命令行解包</h4>

<pre><code>./sbf_flash -x OLYFR_U4_1.8.3_SIGNED_OLPSATTSPE_P013_HWolympus_1g_Service1FF.sbf
</code></pre>

<p>提取到一堆img文件</p>

<h4>2神器：MotoAndroidDepacker</h4>

<p><a href="http://www.veryhuo.com/down/html/47416.html">http://www.veryhuo.com/down/html/47416.html</a></p>

<p>就是这个软件，可以把moto的底包解开。<br/>
使用很简单：<br/>
1 点open from file菜单打开sbf底包，然后点split to files就解开了<br/>
2 将要打包的文件拷到单独的文件夹A，然后点open files，选择刚刚的文件夹A，然后点compile file，就会在文件夹A里面生成result\firmware.sbf文件</p>

<p>解包出的文件解释：
<code>
CG31/CDT是描述各文件版本号的, 相当于注释文件
CG33/CDROM是个ISO文件, 可以用WinRAR之类的打开, 包含PC端程序(MotoHelperAgent)
CG35/Boot包含了系统内核&lt;-boot-only就是这个
CG39/system分区
CG40/cache缓存分区(国行多余的部分), 显然里面什么都没有
CG45/Baseband基带固件
CG47/Recovery就是官方恢复, 里面也包含独立的内核, 但不用于启动
CG61/devtree包含设备描述符
RAMDLD/RamDisk&amp;tmpfs, Android/Linux启动初始化的一部分, 不涉及具体设备
</code></p>

<p>这篇感觉没用 <a href="http://bbs.ihei5.com/thread-5883-1-1.html">http://bbs.ihei5.com/thread-5883-1-1.html</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[GT-S5830刷机教程]]></title>
    <link href="http://abcdxyzk.github.io/blog/2014/12/22/android-s5830-flash/"/>
    <updated>2014-12-22T22:15:00+08:00</updated>
    <id>http://abcdxyzk.github.io/blog/2014/12/22/android-s5830-flash</id>
    <content type="html"><![CDATA[<h5>ROM</h5>

<p>(推荐) 三星 S5830 2.3.4 ROM (国行ZCKPB) <a href="http://dl.dbank.com/c0e5aato8l">http://dl.dbank.com/c0e5aato8l</a></p>

<p>2.3.6 ROM S5830DXKT7.tar.zip  <a href="http://dl.vmall.com/c0016n1hza">http://dl.vmall.com/c0016n1hza</a></p>

<h5>工具</h5>

<p>Odin Multi Downloader v4.38.exe <a href="http://dl.dbank.com/c0ijy8bqrr">http://dl.dbank.com/c0ijy8bqrr</a>
记得装USB驱动</p>

<h3>教程</h3>

<p>[贴自] <a href="http://samsungbbs.cnmo.com/thread-10414540-1-1.html">http://samsungbbs.cnmo.com/thread-10414540-1-1.html</a></p>

<h4>1</h4>

<p>按HOME + 电源键进入recovery模式，双wipe</p>

<h4>2</h4>

<p>电源键+HOME键+音量调节下键 ， 两次出现三星log后会进入downloading模式</p>

<h4>3</h4>

<p>将手机与电脑通过USB数据线相连，然后运行刷机平台Odin Multi Downloader v4.38.exe</p>

<p><img src="/images/system/2014-12-22-1.jpg" alt="" /></p>

<pre><code>
  CSC：全称Customer Specific Customization，里面包含的是运营商数据，不同ROM对应的区域不一样，所以CSC文件也不会相同。
　　PDA：里面是CODE、ANDROID本身和所有的软件运行依靠的代码。
　　PHONE：又称为MODEM，就是基带的意思，是所有通讯模块正常运行的依靠，机带情勿要随便升级替换。
　　OPS：其实不是刷到手机中的文件，而是一个奥丁工具用来刷机的配置文件， 里面记录的是手机各个分区的信息。刷机的时候，奥丁依据这个配置将rom内的分区镜像恢复到指定分区中。如果勾选了“重新分区”，则依据这个配置重新分配分区。
</code></pre>

<h4>4</h4>

<p>选择对应的包</p>

<p><img src="/images/system/2014-12-22-2.jpg" alt="" /></p>

<pre><code>1、点击OPS命令按钮，浏览选择 Cooper_v1.0.ops    
2、点击BOOT命令按钮，浏览选择 APBOOT_S5830****_CL382966_REV03_user_low_true.tar  
3、点击Phone命令按钮，浏览选择 MODEM_S5830****_CL382966_REV03.tar  
4、点击PDA命令按钮，浏览选择 CODE_S5830****_CL382966_REV03_user_low_true.tar  
5、点击CSC命令按钮，浏览选 CSC_GT-S5830S5830O****_CL382966_REV03_user_low_true.tar  
</code></pre>

<p><span style="color:red">注意：可以只有OPS和PDA，PDA里面也可以只有boot.img。替换别的包刷的话最好保持原来包文件名的部分前缀，不然会提示“invalid image type”</span></p>

<hr />

<h2>独立包的刷包方式</h2>

<p>因为独立包只有一个，看起来还是比较简单的。只用放一个包就好了。<br/>
在刷之前确认格式是不是tar格式，名称里面有没有home。</p>

<p><img src="/images/system/2014-12-22-3.jpg" alt="" /></p>

<p>如果有在双击这个ROM，可以进入到压缩包里面，看到这些文件。基本上确认这个包可以刷了。</p>

<p>OPS放好之后，看这里。这3个勾一定打上,</p>

<p><img src="/images/system/2014-12-22-4.jpg" alt="" /></p>

<p>3个勾打上之后，就只有这里面才能放包了，其他都不行</p>

<p><img src="/images/system/2014-12-22-5.jpg" alt="" /></p>

<hr />

<h4>刷好之后是这样</h4>

<p><img src="/images/system/2014-12-22-6.jpg" alt="" /></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[samsung rfs、tar包]]></title>
    <link href="http://abcdxyzk.github.io/blog/2014/12/22/android-rfs-tar/"/>
    <updated>2014-12-22T22:15:00+08:00</updated>
    <id>http://abcdxyzk.github.io/blog/2014/12/22/android-rfs-tar</id>
    <content type="html"><![CDATA[<p>boot.img可以按照 <a href="/blog/2014/12/22/android-img/">这里</a> 的方式编辑</p>

<p>GT-S5830分区
<code>
bml1 mibib
bml2 qcsbl
bml3 oemsbl
bml4 amms
bml5 ????????FSR_STL
bml6 ????????FSR_STL / Empty|Empty RFS Partition???
bml7 arm11boot
bml8 Boot.img
bml9 Recovery.img
bml10 Looks like kernel init?????Contains this string:"em=330M console=NULL hw=5 fbaddr=0xb0000"
bml11 Empty partion no partion table?? Whole file FF
bml12 System.rfs
bml13 Data Partition
bml14 Cache Partition
</code></p>

<p>把所有要打包进ROM的文件都复制到这个文件夹内；<br/>
比如：这些刷机文件包括：boot.img
<code>
   $ tar -cf NewRom.tar boot.img
   $ md5sum -t NewROM.tar &gt;&gt; NewROM.tar
   $ mv NewROM.tar NewROM.tar.md5
</code>
第一句是TAR打包，第二句是md5签名，第三句是改文件名，可以省略。</p>

<p>NewROM.tar.md5就是最后生成的，可供刷机用的ROM了！</p>

<h4>编辑 rfs</h4>

<p>挂载 RFS文件factoryfs.rfs 为一个磁盘：
<code>
    # su
    # mount –o loop factoryfs.rfs System
</code>
进入“磁盘”System目录，你就可以看到factoryfs.rfs解包后的所有内容。</p>

<p>修改好/System的内容后，在超级用户终端执行下面的语句卸载该“磁盘” ，这个操作等价于“打包”过程。
<code>
    # umount System
</code></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[查看所有(挂载、未挂载)的分区]]></title>
    <link href="http://abcdxyzk.github.io/blog/2014/12/22/android-partitions/"/>
    <updated>2014-12-22T22:15:00+08:00</updated>
    <id>http://abcdxyzk.github.io/blog/2014/12/22/android-partitions</id>
    <content type="html"><![CDATA[<p>blog.chinaunix.net/uid-22731254-id-3222708.html</p>

<p>下面的例子都是围绕/system目录。</p>

<p>使用df命令查看
<code>
    # df
    df
    Filesystem Size Used Free Blksize
    /dev       197M 64K   197M 4096
    /mnt/asec  197M 0K    197M 4096
    /mnt/obb   197M 0K    197M 4096
    /system    295M 245M  50M  4096
    /data      755M 26M   728M 4096
    /cache     188M 4M    184M 4096
    /HWUserData 2G 1024K  2G   32768
    /cust      59M 14M    44M  4096
    /mnt/sdcard 7G 753M   6G   32768
    /mnt/secure/asec 7G 753M 6G 32768
</code>
看到/system分区有295MB的大小。</p>

<p>接着查看/proc下的partitions
```
    # cat /proc/partitions
    cat /proc/partitions
    major minor #blocks name</p>

<pre><code>179    0    3817472 mmcblk0
179    1    20      mmcblk0p1
179    2    300     mmcblk0p2
179    3    133120  mmcblk0p3
179    4    1       mmcblk0p4
179    5    12288   mmcblk0p5
179    6    196608  mmcblk0p6
179    7    4096    mmcblk0p7
179    8    3072    mmcblk0p8
179    9    4096    mmcblk0p9
179    10   3072    mmcblk0p10
179    11   3072    mmcblk0p11
179    12   393216  mmcblk0p12
179    13   786432  mmcblk0p13
179    14   4096    mmcblk0p14
179    15   8192    mmcblk0p15
179    16   20480   mmcblk0p16
179    17   4096    mmcblk0p17
179    18   81920   mmcblk0p18
179    19   2154496 mmcblk0p19
179    32   7761920 mmcblk1
179    33   7757824 mmcblk1p1
31     0    4096    mtdblock0
</code></pre>

<p>```</p>

<p>其实，可以在/proc/mounts下面看的更直接。。。</p>
]]></content>
  </entry>
  
</feed>
